function resize_avatar(a){if(a.width>50||a.height>50){if(a.width>a.height){a.width=50}else{a.height=50}}a=null}function resizeImgWidth(j,d){var c=0,g=baidu.G(j).getElementsByTagName("img"),a=g.length,f,b=0,e=0;for(;c<a;c++){f=g[c];b=f.width;if(b>d){e=f.height;f.width=d;f.height=(d/b)*e;f.style.width=d+"px";f.style.height=(d/b)*e+"px"}}}function resize_space_album(b,a){a=a||120;if(b.width>a||b.height>a){if(b.width>b.height){b.width=a}else{b.height=a}}b=null}function resize_space_album_index(b,a,d){a=a||120;var c=b.width/b.height;if(b.width>a||b.height>d){if(b.width>a){b.width=a;b.height=a/c}else{b.height=d;b.width=d*c}}b=null}var share=share||{};baidu.ajax.on500=function(xhr){var response=eval("("+xhr.responseText+")");share.alert(response.error.errmsg,"系统错误",350,120)};share.post=function(url,obj,func){var obj=baidu.extend(obj,{dtype:"json",ie:"utf-8",bdstoken:baidu.G("bdstoken")&&baidu.G("bdstoken").value});function success_func(xhr){var response=eval("("+xhr.responseText+")");if(response&&("error" in response)){switch(response.error.errno){case 403:Space.Libs.loginDialog();break;case 2026:activeShare();break;case 2040:emailVerify();break;default:func(xhr)}}else{func(xhr)}}var opt={method:"POST",data:baidu.url.toQueryString(obj),onsuccess:success_func};share.postAgain=function(){g_tabDialog.closeMe();g_tabDialog=null;baidu.ajax.request(url,opt)};baidu.ajax.request(url,opt)};share.postAgain=function(){};share.get=function(a,c,b){var c=baidu.extend(c,{dtype:"json",ie:"utf-8",asyn:1});baidu.ajax.get(a+"?"+baidu.url.toQueryString(c),b)};share.util={clean_content:function(a){return a.replace(/&nbsp;/g,"").replace(/ /g,"")}};share.pageFlash=[];share.closeFlash=function(){var e=document.getElementsByTagName("object"),d=document.getElementsByTagName("embed");for(var c=0,a=e.length;c<a;c++){share.pageFlash.push(e[c])}for(var b=0,a=d.length;c<a;c++){share.pageFlash.push(d[c])}baidu.array.each(share.pageFlash,function(g,f){g.style.visibility="hidden"})};share.openFlash=function(){baidu.array.each(share.pageFlash,function(b,a){b.style.visibility="visible"})};share.dialogObject;share.alert=function(e,h,d,b){if(share.dialogObject){share.dialogObject.close()}share.closeFlash();e=e;var c={};c.title=h||"系统提示";c.width=d||350;if(b&&b!="auto"){c.height=b}var g=Space.Libs.bdDialog.alert(e,c);share.dialogObject=g;var f=g.getNodes().btnOk,a=g.getNodes().btnClose;baidu.on(f,"click",function(){share.openFlash()});baidu.on(a,"click",function(){share.openFlash()});return g};share.showTextDialog=function(e,g,d,b){if(share.dialogObject){share.dialogObject.close()}var c={content:e,title:g||"系统提示",width:d||350};if(b&&b!="auto"){c.height=b}var f=Space.Libs.bdDialog.createCustomsDialog(c);share.dialogObject=f;f.onClose=function(){share.openFlash()};var a=f.nodes.btnClose;f.nodes.content.style.paddingTop="60px";baidu.on(a,"click",function(){share.openFlash()});share.closeFlash();f.show();f.setMiddle();setTimeout(function(){f.close();share.openFlash()},2000);return f};share.showConformDialog=function(f,c){var b=c.needCen?"width:154px;":"";var g=c.marginLeft?"margin-left:"+c.marginLeft+";":"";var e='<div class="pop-html"><div class="pop-body" >'+f+'</div><div class="pop-buttons"><div style="'+b+g+'" class="pop-buttons-c"><a id="okBtn" href="#" onclick="return false;" class="pop-submit" style="color:#fff;">确定</a><a id="cancelBtn" href="#" onclick="return false;" class="pop-cancel" style="color:#717171;" >取消</a></div></div></div>';if(share.dialogObject){share.dialogObject.close()}var d={content:e,title:c.title||"系统提示",width:c.width||400};if(c.height&&c.height!="auto"){d.height=c.height}var h=Space.Libs.bdDialog.createCustomsDialog(d);share.dialogObject=h;h.onClose=function(){share.openFlash()};h.funcOk=c.funcOk||undefined;h.onCancelBtn=c.onCancelBtn||undefined;share.closeFlash();h.show();baidu.event.on(baidu.g("okBtn"),"click",function(){if(h.funcOk){h.funcOk()}else{h.close()}});baidu.event.on(baidu.g("cancelBtn"),"click",function(){if(h.onCancelBtn){h.onCancelBtn(function(){h.close()})}else{h.close()}});var a=h.nodes.btnClose;h.nodes.content.style.height="auto";h.nodes.entity.style.height="auto";baidu.on(a,"click",function(){share.openFlash()});h.setMiddle();return h};share.successMsg=function(a,b,d){var a='<p style="text-align:center;font-size:12px;">'+a+"</p>";if(d){a+='<p style="text-align:center;margin-top:10px;font-size:12px;"><a href="'+d+'">查看转载文章</a></p>'}var c=share.showTextDialog(a,"系统提示",350,120);setTimeout(function(){c.close();if(b){location.href=b}else{location.reload()}},d?3000:1000)};share.msg={comment_create_success:"评论发表成功",comment_create_share_success:"评论发表以及分享成功",comment_delete_confirm:'<div style="margin-bottom:10px">您确定要删除此评论吗?</div>',share_delete_success:"分享删除成功",share_create_success:"分享发表成功",vote_create_success:"投票创建成功",vote_success:"投票成功",tag_input_warring:"请输入标签词内容",tag_input_hint:"直接输入标签词，最多可输入16个字",comment_too_long:"评论内容长度不能大于250个汉字哦",share_reason_too_long:"分享理由内容长度不能大于250个汉字哦",tip_content:"请输入视频、网页、音乐的网址"};share.parseUrl=function(){var a=window.location.href;var b=decodeURIComponent(baidu.url.parseQuery(a,"url"));b=b=="null"?null:b;var d=decodeURIComponent(baidu.url.parseQuery(a,"title"));d=d=="null"?null:d;var c=decodeURIComponent(baidu.url.parseQuery(a,"content"));c=c=="null"?null:c;if(b&&b!="null"){share.create.getParseResult(b,d,c)}};(function(){var a={};share.hotTab=function(f){var c=baidu.G(f);a[f]=0;var d=c.getElementsByTagName("li");for(var e=0,b=d.length;e<b;e++){d[e].onmouseover=(function(g){return function(){if(g==a[f]){return}baidu.G(f+a[f]).style.display="none";if(baidu.G(f+g).innerHTML==""&&baidu.G(f+g+"-area")){baidu.G(f+g).innerHTML=baidu.G(f+g+"-area").value}baidu.G(f+g).style.display="";d[a[f]].className="";d[g].className="on";a[f]=g}})(e)}}})();share.hotVideoShowShareBtn=function(g,f){g=baidu.G(g);f=f|0;var c=g.getElementsByTagName("li");if(c.length>0){for(var d=0,a=c.length;d<a;d++){c[d].onmouseover=function(){if(this.getElementsByTagName("span").length>0){this.getElementsByTagName("span")[f].style.display=""}};c[d].onmouseout=function(){if(this.getElementsByTagName("span").length>0){this.getElementsByTagName("span")[f].style.display="none"}}}}else{var e=g.getElementsByTagName("div");for(var b=0,a=e.length;b<a;b++){e[b].onmouseover=function(){if(this.getElementsByTagName("span").length>0){this.getElementsByTagName("span")[f].style.display=""}};e[b].onmouseout=function(){if(this.getElementsByTagName("span").length>0){this.getElementsByTagName("span")[f].style.display="none"}}}}};share.showHotItems=function(b){var a=App.Domain.apps+"/share/detail/";share.showTextItems(b.text,a);share.showSlideItems(b.slide,a);share.showVideoItems(b,a);share.showAlbumItems(b,a);share.showBlogItems(b,a)};share.showTextItems=function(d,h){var l=d.bItems,b=d.hItems,g=[];g.push('<h5 class="today-recommend">今日推荐</h5>');for(var e=0,m=l.length;e<m;e++){if(e==m-1){g.push('<div class="list">')}else{g.push('<div class="list nob">')}g.push('<h5><a href="'+h+l[e].link_shid+'" target="_blank">'+l[e].title+"</a></h5>");var o=l[e].sItems;for(var c=0,n=o.length,p=[];c<n;c++){p.push('<a href="'+h+o[c].link_shid+'" target="_blank">'+o[c].title+"</a>")}g.push(p.join("&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;"));g.push("</div>")}g.push('<h5 class="hot-share">热门分享</h5><ul>');for(var a=0,f=b.length;a<f;a++){g.push('<li><a href="'+h+b[a].link_shid+'" target="_blank">'+b[a].title+"</a></li>")}g.push("</ul>");baidu.G("share-home-editorcon").innerHTML=g.join("")};share.showSlideItems=function(g,d){for(var f=0,b=g.length,e=[],c="",a=[];f<b;f++){e[e.length]='<li><a href="'+d+g[f].link_shid+'"  target="_blank"><img src="'+g[f].picUrl+'" width="200" height="150" /><span>'+g[f].title+"</span></a></li>"}baidu.G("share-home-slide-ul").innerHTML=e.join("");baidu.G("share-home-slide-contain").scrollLeft=0;setTimeout(function(){share.slideHot(true,false)},2500)};share._truncate=function(c,a){var b=baidu.string.getByteLength(c);if(b<=a){return c}else{var d=baidu.string.subByte(c,a-3);return d+"..."}};share.showVideoItems=function(g,b){var h=g.video,f=g.video_hot;for(var d=0,a=h.length,c=[];d<a;d++){var e=h[d];c.push('<li><a title="'+e.title+'" href="'+b+e.link_shid+'" target="_blank"><img width="140" height="106" src="'+e.picUrl+'" /><span>'+share._truncate(e.title,40)+'</span><div class="video_pic_play1"></div></a><span class="share-btn" style="display:none" onclick="share.share(\'\',\''+e.shid+"', '', '"+e.link_shid+"')\">&nbsp;</span></li>")}baidu.G("share-home-hot-video").innerHTML=c.join("");for(var d=0,a=f.length,c=[];d<a;d++){var e=f[d];if(d==0){c.push('<div class="first"><a style="text-decoration:none;" title="'+e.title+'" href="'+b+e.link_shid+'" target="_blank"><div class="video_pic_play1"></div><img  src="'+e.picUrl+'" title="'+e.title+'"/><span>'+share._truncate(e.title,40)+'</span></a><span class="share-btn" style="display:none" onclick="share.share(\'\',\''+e.shid+"', '', '"+e.link_shid+"')\">&nbsp;</span></div>")}else{c.push('<div><a title="'+e.title+'" href="'+b+e.link_shid+'" target="_blank">'+share._truncate(e.title,40)+"</a></div>")}}baidu.G("share-home-hot-video-main").innerHTML=c.join("");share.hotVideoShowShareBtn("share-home-hot-video-main",1);share.hotVideoShowShareBtn("share-home-hot-video",1)};share.showAlbumItems=function(b,e){var a=b.album,f=b.album_hot;var d='<div><a style="text-decoration:none;" href="'+e+f.link_shid+'" target="_blank" title="'+f.title+'"><img src="'+f.picUrl+'" title="'+f.title+'"/><span>'+f.title+'</span></a><span class="share-btn" style="display:none" onclick="share.share(\'\',\''+f.shid+"', '', '"+f.link_shid+"')\">&nbsp;</span></div>";var j=baidu.g("share-home-hot-album-main");j.innerHTML=d;for(var c=0,g=a.length,d=[];c<g;c++){var h=a[c];d.push('<li><div class="list"><table><tr><td align="center" valign="middle"><a href="'+e+h.link_shid+'" target="_blank" title="'+h.title+'"><img onload="resize_space_album_index(this,140,160)" src="'+h.picUrl+'" title="'+h.title+'"/></a></td></tr></table><span class="share-btn1" style="display:none" onclick="share.share(\'\',\''+h.shid+"', '', '"+h.link_shid+'\')">&nbsp;</span></div><a href="'+e+h.link_shid+'" target="_blank" title="'+h.title+'">'+share._truncate(h.title,24)+"</a></li>")}baidu.G("share-home-hot-album").innerHTML=d.join("");share.hotVideoShowShareBtn("share-home-hot-album-main",1);share.hotVideoShowShareBtn("share-home-hot-album",0)};share.showBlogItems=function(g,b){var h=g.blog,e=g.blog_hot;for(var d=0,a=e.length,c=[];d<a;d++){var f=e[d];if(d==0){c.push('<div class="first"><a style="text-decoration:none;" target="_blank" href="'+b+f.link_shid+'" title="'+f.title+'"><img src="'+f.picUrl+'"/> <span>'+share._truncate(f.title,55)+'</span></a><span class="share-btn" style="display:none" onclick="share.share(\'\',\''+f.shid+"', '', '"+f.link_shid+"')\">&nbsp;</span></div>")}else{c.push('<div><a target="_blank" href="'+b+f.link_shid+'" title="'+f.title+'">'+share._truncate(f.title,55)+"</a></div>")}}baidu.G("share-home-hot-blog-main").innerHTML=c.join("");for(var d=0,a=h.length,c=[];d<a;d++){var f=h[d];if(d==0){c.push('<li class="first"><h3><a target="_blank" href="'+b+f.link_shid+'" title="'+f.title+'">'+share._truncate(f.title,55)+"</a></h3><p>"+share._truncate(f.blog_abstract,106)+'<a target="_blank" href="'+b+f.link_shid+'">[详细]</a></p></li>')}else{c.push('<li class="clearfix"><a class="hasPic" target="_blank" href="'+b+f.link_shid+'" title="'+f.title+'"><img src="'+f.picUrl+'" title="'+f.title+'"/></a><div class="abs"><h3><a target="_blank" href="'+b+f.link_shid+'" title="'+f.title+'">'+share._truncate(f.title,40)+"</a></h3><p>"+share._truncate(f.blog_abstract,150)+'<a target="_blank" href="'+b+f.link_shid+'">[详细]</a></p></div></li>')}}share.hotVideoShowShareBtn("share-home-hot-blog-main",1);baidu.G("share-home-hot-blog").innerHTML=c.join("")};share.showSlideItems=function(k,j){var l=baidu.g,r=0,a=0,p=10,b,e;var q={Linear:function(i,g,u,n){return u*i/n+g},Quart:{easeIn:function(i,g,u,n){return u*(i/=n)*i*i*i+g},easeOut:function(i,g,u,n){return -u*((i=i/n-1)*i*i*i-1)+g}}};var o=function(g){clearTimeout(e);for(var w=0,t=k.length;w<t;w++){l("ASCBtn"+w).className="off"}l("ASCBtn"+g).className="on";var v=l("imgbox"),u=baidu.q("imgbox-cont",l("ASC"))[0].clientWidth;v.style.marginLeft=-r*u+"px";var x=0,d=0,y=1-d;a=-r*u;if(g==0&&r==t-1){baidu.dom.setStyles(v.firstChild,{position:"relative",left:u*t+"px"});x=-t*u-a}else{x=-g*u-a}for(var w=1;w<=p;w++){function A(n,C){e=setTimeout(function(){var i=q.Quart.easeOut(n,a,x,p);v.style.marginLeft=i+"px";if(n==p){C.call(v,i)}},75*n)}function z(n){e=setTimeout(function(){var i=q.Quart.easeOut(n,d,y,p);baidu.g("ASCTitle").style.opacity=i;if(n==p){d=i}},75*n)}if(g==0&&r==t-1){var B=function(){a=0;v.style.marginLeft="0px";baidu.dom.removeStyle(v.firstChild,"position");baidu.dom.removeStyle(v.firstChild,"left")};A.apply(v,[w,B])}else{var B=function(i){baidu.dom.removeStyle(v.firstChild,"position");baidu.dom.removeStyle(v.firstChild,"left")};A.apply(v,[w,B])}z.call(v,w)}l("ASCTitleC").innerHTML=k[g].title;r=g};var h=[];h.push('<div id="ASC">');h.push('<div class="imgbox-cont">');h.push('<div id="imgbox">');for(var f=0,c=k.length;f<c;f++){h.push('<a class="ASCLink" href="'+j+k[f].link_shid+'" target="_blank"><img id="ASCImg" src="'+k[f].picUrl+'" border="0"/></a>')}h.push("</div>");h.push("</div>");h.push('<div id="ASCTitle"><span id="ASCTitleC"></span>');h.push("</div>");h.push('<div id="ASCBtnBox">');for(var f=0,c=k.length;f<c;f++){h.push('<div id="ASCBtn'+f+'" class="off">'+(f+1)+"</div>")}h.push("</div>");h.push("</div>");l("share-home-slide").innerHTML=h.join("");for(var f=0,c=k.length;f<c;f++){l("ASCBtn"+f).onclick=function(){clearInterval(b);clearTimeout(e);o(parseInt(this.id.replace("ASCBtn","")))}}l("ASC").onmouseover=function(){clearInterval(b)};l("ASC").onmouseout=function(){m()};o(0);var m=function(){b=setInterval(function(){var d,g;for(d=0,g=k.length;d<g;d++){if(l("ASCBtn"+d).className=="on"){break}}if(d+1>=g){d=0}else{d++}clearTimeout(e);o(d)},2500)};m()};share.setDefaultVote=function(b,d){b=b||"vote_opt";d=d||"defaultContent";var a=["很好很强大~","太牛了！","迅速围观！","酱油党飘过~","分享是美德~"];var f=document.getElementsByName(b);for(var e=f.length,c=0;c<e;c++){if(a[c]){f[c].value=a[c];f[c].className=d}baidu.on(f[c],"focus",function(){if(this.className==d){this.className="";this.value=""}})}};share.ku6ContestTip=function(){var d=["每天转一转，就有更多机会得到幸运奖","你知道吗？视频足够有趣，就能登上分享首页哦~","分享中加入有趣的投票，会有更多人关注~","在下午2:00――6:00分享，你的分享将得到更多关注","多多分享，赢取大奖，送给心目中的Ta吧！"];var f=baidu.g("ku6_random_tips");var c=baidu.g("ku6_pop_close");var g="ku6timestamp_2";if(!f&&!c){setTimeout(arguments.callee,50);return}if(f){f.innerHTML=d[Math.floor(Math.random()*d.length)]}var e=baidu.cookie.get(g);var b=+new Date();var a=7*24*60*60*1000+b;if(!e||b>e){c.parentNode.style.display="block";c.onclick=function(){this.parentNode.style.display="none";baidu.cookie.set(g,a,{expires:a});return false}}};share.ku6ContestTip();baidu.dom.ready(function(){if(baidu.g("share-home-new-video")){share.hotVideoShowShareBtn("share-home-new-video",1)}});share.safelink={showConfirm:function(c){function d(f){var e=new RegExp("^(?:f|ht)tp(?:s)?://([^/]+)","im");return f.match(e)[1].toString()}function a(g,f){var e=g.length-f.length;return e>=0&&g.lastIndexOf(f,e)==e}var b=d(c.href);if(a(b,"baidu.com")){return true}else{baidu.show("appShareSafeLinkTip");c.onclick=function(){return false};return false}},close:function(){baidu.hide("appShareSafeLinkTip")}};share.create={changeTypeBySelect:function(a){if(a.selectedIndex>-1){var c=a.options[a.selectedIndex];var b=c.value;share.create.changeType(b)}},_host_portrait:"",_cur_link_num:0,increaseLink:function(){var e=3;var c=30;var b=share.create._cur_link_num;for(var a=b+1;a<=b+e;a++){if(a>c){return}var d=document.createElement("dl");d.innerHTML=baidu.format('<dt>图片#{num}</dt><dd><input name="sharePicLink" /></dd>',{num:a});baidu.G("sharePicLinkContainer").appendChild(d)}share.create._cur_link_num=b+e},getParseResult:function(url,title,content){var postData={url:url,_method:"parse_url"};if(title){postData.title=title}if(content){postData.content=content}share.post("/share/cm/",postData,function(xhr){var response=eval("("+xhr.responseText+")");if(response&&("error" in response)&&(response.error.errno|0)>0){if(response.error.errno==403){return Space.Libs.loginDialog()}else{if(response.error.errno==2026){try{activeShare()}catch(e){}return}else{return share.showTextDialog('<p style="text-align:center;font-size:14px;">'+response.error.errmsg+"</p>","系统提示",350,120)}}}return share.create.inputContent(response.type,response.data)})},inputByForm:function(b){if(b){this._host_portrait=b}share.nsTrack("share_input_click",location.href);var a=baidu.G("appShareInput").value;this.getParseResult(a);return false},inputContent:function(g,d){content_types={video:{height:"auto",content:["tab","toperson","zhuanzai","video_pic","title_with_value","content_with_value","readonly_url","reason"]},space_pic:{height:"auto",content:["tab","toperson","zhuanzai","title_with_value","content","space_pic","readonly_url","reason"]},space_album:{height:"auto",content:["tab","toperson","zhuanzai","readonly_title","space_album","readonly_url","reason"]},space_blog:{height:"auto",content:["tab","toperson","zhuanzai","readonly_title","readonly_content","readonly_url","reason"]},space_vphoto:{height:"auto",content:["tab","toperson","zhuanzai","readonly_title","readonly_content","space_vphoto_pic","readonly_url","reason"]},web_page2:{height:"auto",content:["tab","toperson","zhuanzai","title_with_value","content","readonly_url","reason"]},web_page:{height:"auto",content:["tab","toperson","zhuanzai","title_with_value","readonly_content","readonly_url","reason"]},baidu_yule:{height:"auto",content:["tab","toperson","zhuanzai","title_with_value","readonly_content","readonly_url","reason"]},baidu_zhangmen:{height:"auto",content:["tab","toperson","zhuanzai","title_with_value","readonly_content","readonly_url","reason"]},text:{height:"auto",content:["tab","toperson","zhuanzai","title","content_with_value","reason"]},baidu_doc:{height:"auto",content:["tab","toperson","zhuanzai","video_pic","title_with_value","readonly_content","readonly_url","reason"]},baidu_baike:{height:"auto",content:["tab","toperson","zhuanzai","baike_pic","readonly_title","content_with_value","readonly_url","reason"]}};var h={tab:function(){return'<div class="clearfix" style="overflow:hidden"><ul  class="share-myshare-tab-app" id="shareMyshareTab"><li class="on" onclick="tabfunction(event)" rel="all" >分享</li><li onclick="tabfunction(event)" rel="self" >私藏给自己</li></ul></div>'},toperson:function(){return'<div class="share-myshare-to-app clearfix" id="shareMyshareTo"> <strong>分享给：</strong><label for="_r1"><input type="radio" style="width:20px" id="_r1" name="person" value="0" checked="true" />所有人</label><label for="_r2"><input type="radio" id="_r2" style="width:20px" name="person" value="1" />好友</label><input style="display:none;" type="radio" name="person" value="2" /> <input type="hidden" id="auth" name="auth" value="0" /></div>'},zhuanzai:function(){return'<dl style="margin-top:20px"><dd style="padding: 0pt;"><input type="checkbox" id="zzToBlog" style="width:auto;margin-left:0px" name="zzToBlog" value="1"><label for="zzToBlog">同时转载到我的博客</label></dd></dl>'},reason:function(){return'<div class="clearfix" style="margin-top:0px;"><h5 style="margin:20px 0 10px 0;font-size:12px">分享理由</h5><textarea id="comment_content" style="padding:0;width:368px;border:1px solid #bdc7d8" name="comment_content"></textarea><input type="hidden" id="link_shid" name="link_shid" value="" /></div>'},auth:function(){return'<dl><dt>权限：</dt><dd><select id="shareCreateSelect" name="auth"><option value="0">所有人</option><option value="1">仅好友可见</option><option value="2">自己</option></select></dd></dl>'},title_with_value:function(){return'<dl style="margin:10px 0 5px 0;"><dd><input type="text" style="border:1px solid #bdc7d8;height:20px" id="shareTitle" value="<%=baidu.encodeAttr(title)%>" name="title" maxlength="50"/></dd></dl>'},title:function(){return'<dl style="margin:10px 0 5px 0;"><dd><input type="text" style="border:1px solid #bdc7d8;height:20px" id="shareTitle" name="title" maxlength="50" /></dd></dl>'},readonly_title:function(){return'<dl><dd id="readonly_title" style="margin-left:9px;"><%=baidu.encodeHTML(title)%></dd></dl>'},readonly_url:function(){return'<dl class="clearfix"><dd  style="width:345px;word-break:break-all;clear:both;"><a href="<%=baidu.encodeHTML(url)%>" target="_blank" style="font-size:12px"><%=baidu.encodeHTML(url)%></a><input type="hidden" name="url" value="<%=baidu.encodeHTML(url)%>" /></dd></dl>'},content:function(){return'<dl><dd><textarea id="shareContent" name="content"></textarea></dd></dl>'},readonly_content:function(){return'<dl id="warp_content"  style="margin-left:14px; font-size:12px; height:67px;overflow:hidden;"><dd id="readonly_content" style="width:360px;"><%=baidu.string.truncate(content, 100)%></dd><input type="hidden" name="content" value="<%=baidu.string.truncate(content, 100)%>"></dl>'},content_with_value:function(){return'<dl><dd><div style="width:255px;color:#4E4E4E;height:70px;overflow:hidden;font-size:12px;" id="shareContent" ><%=baidu.encodeHTML(content)%></div><input style="display:none;" type="text" name="content" value="<%=baidu.encodeHTML(content)%>" /></dd></dl>'},video_pic:function(){return'<dl style="clear: both;margin-top:20px"><dd><div class="video_pic_frameframe" style="float:left;padding-right:10px;position:relative;width:126px;height:96px;"><div class="video_pic_play"></div><img class="video_pic" src="<%=extra.video_pic%>" width="120"/></div></dd></dl>'},space_vphoto_pic:function(){return'<div style="float:left"><dl style="margin-top:20px"><dd><div class="video_pic_frameframe" style="float:left;padding-right:10px;position:relative;width:126px;height:96px;"><div class="video_pic_play"></div><img class="video_pic" src="http://hiphotos.baidu.com/<%=extra.space_url%>/abpic/item/<%=extra.thumb_picid%>.jpg<%=extra.video_pic%>" width="120"/></div></dd></dl></div>'},space_pic:function(){return'<dl style="margin-top:20px"><dd><img src="<%=extra.space_pic%>" /></dd></dl>'},space_album:function(){return'<dl style="margin-top:20px"><dd><%=share.create.spaceAlbum(extra)%></dd></dl>'},baike_pic:function(){return'<dl style="clear: both;margin-top:20px" id="baike_picture" ><dd><div style="float:left;padding-right:10px;zoom:1"><img class="video_pic" style="padding-left:10px" src="<%=pic%>" width="100" height="100"/></div></dd></dl>'}};var a=content_types[g]||content_types.web_page;var b=['<form id="appShareCreateForm" onsubmit="return share.create.submitFunc();"><div id="appShareCreate">'];b.push('<dl class="clearfix" style="position:absolute; top:55px; right:40px"><dd id="appShareCreateFormError" class="error"></dd></dl>');b.push("");baidu.each(a.content,function(j){b.push(h[j]())});var i='<div class="choiceType" id="choiceType"><span>设置互动观点:</span><input name="option" onclick="share.create.showTypeDiv(0)" checked="checked"  id="tagType" type="radio"/><label onclick="share.create.showTypeDiv(0)" for="tagType">标签方式</label><input onclick="share.create.showTypeDiv(1)"  name="option" id="voteType" type="radio"/><label onclick="share.create.showTypeDiv(1)" for="voteType">投票方式</label><input name="option" id="nocenseType" type="radio" onclick="share.create.showTypeDiv(2)" /><label onclick="share.create.showTypeDiv(2)" for="nocenseType">无互动观点</label></div>';var e='<div class="appShareCreateTag"><p>我的标签词</p><input class="tagValuePop" type="text" maxLength="16" onblur=share.create.tagInput(this,"blur") onfocus=share.create.tagInput(this,"focus") value="'+share.msg.tag_input_hint+'" id="tagValuePop"/></div>';var c=['<div id="appShareCreateVote" style="display:none">','<dl><dt>选项1: </dt><dd><input type="text" name="vote_opt"/></dd></dl>','<dl><dt>选项2: </dt><dd><input type="text" name="vote_opt"/></dd></dl>','<dl><dt>选项3: </dt><dd><input type="text" name="vote_opt"/></dd></dl>','<dl><dt>选项4: </dt><dd><input type="text" name="vote_opt"/></dd></dl>','<dl><dt>选项5: </dt><dd><input type="text" name="vote_opt"/></dd></dl>',"</div>"];b.push(i);b.push('<div id="choiceTypeDiv" class="choiceTypeDiv">');b.push(e);b.push(c.join(""));b.push("</div>");b.push("</div>");share.create.lastBlogUrl=false;share.create.lastShid=false;share.create.displayVote=false;d.content=d.content||"";if((g=="baidu_yule"||g=="baidu_zhangmen")&&d&&"content" in d){d.content=d.content.replace(/<[^<>]+>/g,"")}var f=share.showConformDialog(baidu.tmpl(b.join(""),d),{title:"分享",width:520,height:a.height,funcOk:function(){share.create.submitFunc()}});if(f){f.nodes.content.style.display="none";f.nodes.content.style.display=""}if(g=="web_page"){baidu.g("warp_content").style.height="0px";baidu.g("shareTitle").style.width="368px"}if(baidu.G("shareTitle")){baidu.G("shareTitle").focus()}share.setDefaultVote("vote_opt","defaultContent");baidu.g("baike_picture")&&(baidu.g("readonly_title").style.paddingLeft="110px");if(g=="baidu_doc"){baidu.g("readonly_content").style.marginLeft="10px";baidu.g("readonly_content").style.width="260px"}},lastBlogUrl:false,lastShid:false,displayType:"tag",submitVote:function(shid,blogUrl){var has_value=false;var form_data={_method:"create_vote_item",shid:shid};var inputs=baidu.G("appShareCreateVote").getElementsByTagName("input");var curr_index=0;var vote_options={};baidu.each(inputs,function(input){var input_value=baidu.trim(input.value);if(input_value!=""){vote_options[input_value]=true;has_value=true}});if(has_value){baidu.each(vote_options,function(option,option_key){form_data["vote_item_"+curr_index]=option_key;curr_index=curr_index+1});share.post("/share/cm/",form_data,function(xhr){var response=eval("("+xhr.responseText+")");if(response.error.errno==0){share.successMsg(share.msg.share_create_success,"/share/detail/"+shid,blogUrl)}else{baidu.G("appShareCreateFormError").innerHTML=response.error.errmsg}})}else{share.successMsg(share.msg.share_create_success,"/share/detail/"+shid)}return false},submitTag:function(shid,blogUrl){share.post("/share/cm",{_method:"create_tag",shid:shid,tag_text:baidu.g("tagValuePop").value,async:false},function(xhr){var response=eval("("+xhr.responseText+")");if(response.error.errno==0){share.successMsg(share.msg.share_create_success,"/share/detail/"+shid,blogUrl)}else{baidu.G("appShareCreateFormError").innerHTML=response.error.errmsg}})},submitFunc:function(portrait){if(portrait){this._host_portrait=portrait}if(share.create.displayType=="tag"&&(baidu.string.trim(baidu.g("tagValuePop").value)==""||baidu.string.trim(baidu.g("tagValuePop").value)==share.msg.tag_input_hint)){baidu.G("appShareCreateFormError").innerHTML=share.msg.tag_input_warring;return false}var comment_content=baidu.trim(baidu.G("comment_content").value);if(baidu.string.getByteLength(comment_content)>500){baidu.G("appShareCreateFormError").innerHTML=share.msg.share_reason_too_long;return false}if(share.create.lastShid!=false){switch(share.create.displayType){case"tag":share.create.submitTag(share.create.lastShid,share.create.lastBlogUrl);break;case"vote":share.create.submitVote(share.create.lastShid,share.create.lastBlogUrl);break;case"none":share.successMsg(share.msg.share_create_success,"/share/detail/"+share.create.lastShid,share.create.lastBlogUrl);break}return false}var form_data=baidu.form.get_value("appShareCreateForm");form_data._method="create_share";var that=this;share.post("/share/cm/",form_data,function(xhr){var response=eval("("+xhr.responseText+")"),blogUrl="";if("spaceUrl" in response&&"blogID" in response){blogUrl="http://hi.baidu.com/"+encodeURIComponent(response.spaceUrl)+"/blog/item/"+response.blogID+".html";share.create.lastBlogUrl=blogUrl}if(typeof act_id!=="undefined"&&act_id){baidu.g("staticIframe").src="http://act.hi.baidu.com/activity/data/stat/?from=share&act_id="+act_id}if(response.error.errno==0){if(comment_content!=""){obj={thread_id:parseInt(response.shid),content:baidu.string.encodeHTML(comment_content)};if(that._host_portrait){obj.host_portrait=that._host_portrait}var comment=new Space.Pubs.Comment();comment.addComment(obj)}share.create.lastShid=response.shid;switch(share.create.displayType){case"tag":setTimeout(function(){share.create.submitTag(share.create.lastShid,blogUrl)},1000);break;case"vote":setTimeout(function(){share.create.submitVote(share.create.lastShid,blogUrl)},1000);break;case"none":share.successMsg(share.msg.share_create_success,"/share/detail/"+response.shid,blogUrl);break}}else{baidu.G("appShareCreateFormError").innerHTML=response.error.errmsg}});return false},initInputButton:function(){var a=baidu.G("appShareInput"),c=baidu.G("appShareButton"),d=baidu.G("appShareInputContainer"),b=baidu.G("appShareClose");if(c&&d){d.style.display="none";baidu.on(c,"click",function(){if(d.style.display=="none"){d.style.display="";a.value=share.msg.tip_content;a.style.color="#999"}else{d.style.display="none"}});baidu.on(b,"click",function(){d.style.display="none"})}if(a){a.onfocus=function(){if(baidu.string.trim(a.value)==""||baidu.string.trim(a.value)==share.msg.tip_content){a.value="";a.style.color="#000"}};a.onblur=function(){if(baidu.string.trim(a.value)==""){a.value=share.msg.tip_content;a.style.color="#999"}}}},showTypeDiv:function(b){var a=baidu.g("choiceTypeDiv").getElementsByTagName("div");switch(parseInt(b)){case 0:share.create.displayType="tag";break;case 1:share.create.displayType="vote";break;case 2:share.create.displayType="none";break}baidu.array.each(a,function(d,c){if(c==b){d.style.display=""}else{d.style.display="none"}})},tagInput:function(b,a){switch(a){case"focus":if(baidu.string.trim(b.value)==share.msg.tag_input_hint){b.value=""}b.style.color="#000";break;case"blur":if(baidu.string.trim(b.value)==""){b.style.color="#a9a9a9";b.value=share.msg.tag_input_hint}break}},showperson:function(){var a=baidu.G("shareMyshareTo");if(a.style.display=="none"){a.style.display="block"}else{a.style.display="none"}},spaceAlbum:function(a){if(("photo_list" in a)&&a.photo_list.length>0){return'<img class="share_space_album" style="margin-left:10px" src="'+a.photo_list[0].pic+'" />'}else{return""}},tip:function(){var b=['<div id="appShareCreateHelp"><h4>1. 如何分享视频</h5>',"<p>目前只支持优酷、土豆、酷6、56</p>","<p>请选择地址如：</p>","<p>http://v.youku.com/v_show/id_XMTM5MzE2NzQ0.html</p>","<p>http://www.tudou.com/programs/view/dx6y3Q21cWk/</p>","<p>请直接把地址填写入分享框内，点击分享</p>","<h4>2. 如何分享空间的博客文章</h4>","<p>请直接将博客地址如：</p>","<p>http://hi.baidu.com/%B0%D9%B6%C8%BF%D5%BC%E4/blog/item/e1de8db116cc445f09230288.html</p>","<p>请直接把地址填写入分享框内，点击分享</p>","<h4>3. 如何分享空间的相册图片</h4>","<p>请直接将空间相册地址如： </p>","<p>http://hi.baidu.com/%B0%D9%B6%C8%B5%AF%B5%AF%CC%C3/album/%D3%CE%CF%B7%B1%DA%D6%BD</p>","<p>请直接把地址填写入分享框内，点击分享</p></div>"].join("");var a=share.alert(b,"如何分享",485)}};function tabfunction(a){var a=a||window.event;var b=a.srcElement||a.target;b.className="on";if(baidu.dom.getAttr(b,"rel")=="self"){baidu.dom.hide("shareMyshareTo");baidu.G("auth").value=2}else{baidu.dom.show("shareMyshareTo");var c=baidu.G("_r1");if(c.checked){baidu.G("auth").value=0}else{baidu.G("auth").value=1}}baidu.dom.next(b)&&(baidu.dom.next(b).className="");baidu.dom.prev(b)&&(baidu.dom.prev(b).className="")}baidu.dom.ready(function(){var b=baidu.g("appShareList");if(b){var a=baidu.dom.q("listTable",b);baidu.array.each(a,function(d,c){baidu.on(d,"mouseover",function(){if(baidu.dom.q("delete-share",d).length>0){baidu.dom.q("delete-share",d)[0].style.display=""}d.style.backgroundColor="#f4f9fe"});baidu.on(d,"mouseout",function(){d.style.backgroundColor="#fff";if(baidu.dom.q("delete-share",d).length>0){baidu.dom.q("delete-share",d)[0].style.display="none"}})})}});share.postShare={shid:0,post:function(){try{var form_data=baidu.form.get_value("appShareShareForm");form_data._method="create_share";form_data.shid=this.shid;share.post("/share/cm/",form_data,function(xhr){var response=eval("("+xhr.responseText+")"),blogUrl="";if("spaceUrl" in response&&"blogID" in response){blogUrl="http://hi.baidu.com/"+encodeURIComponent(response.spaceUrl)+"/blog/item/"+response.blogID+".html"}if(response.error.errno==0){share.successMsg(share.msg.share_create_success,"/share/detail/"+response.shid,blogUrl)}else{baidu.G("share_share_comment_error").style.display="";baidu.G("share_share_comment_error").innerHTML=response.error.errmsg}})}catch(e){}}};share.postCommentCallback=function(b){var c=b.split("|"),f={};for(var d=0,a=c.length;d<a;d++){var e=c[d].split("_");f[e[0]]=e[1]}if(f.errno==0){share.postShare.post()}else{baidu.G("share_share_comment_error").style.display="";baidu.G("share_share_comment_error").innerHTML="发表评论失败！"}};share.share=function(h,g,e,j,a,d){if(typeof spUserStatus!="undefined"&&(spUserStatus|0)==0){share.nsTrack("share_btn_click_notlogin",location.href);Space.Libs.loginDialog();return}share.nsTrack("share_btn_click",location.href);share.postShare.shid=j;var j=j;var i=e||"";var c=['<form id="appShareShareForm" name="appShareShareForm">','<div id="appShareShare">',i,a?'<span style="display:none;">':"",'<dl style="margin: 0 0 0 1em;"><dt>浏览权限:</dt>','<dd><select id="shareCreateSelect" name="auth"><option value="0">所有人</option><option value="1">仅好友可见</option><option value="2">自己</option></select></dd></dl>','<dl style="margin: 10px 0 15px 78px;"><dd style="padding:0"><input type="checkbox" value="1" name="zzToBlog" id="zzToBlog"><label for="zzToBlog">同时转载到我的博客</label></dd></dl>','<dt>您的看法是:<br><span style="font-weight:normal;margin-left:3em">(选填)</span></dt>','<textarea id="share_share_comment_content" name="comment_content" style="border:1px solid #BDC7D8;height:88px;width:350px;_width:340px;"></textarea>','<p id="share_share_comment_error" class="error" style="display:none"></p>',a?"</span>":"","</div>","</form>"];function b(){var k=baidu.trim(baidu.G("share_share_comment_content").value),l={thread_id:j,callback:"share.postCommentCallback",content:baidu.string.encodeHTML(k),u:App.Domain.apps+"/static/html/proxy.html"};var m=new Space.Pubs.Comment();if(h){l.host_portrait=h}m.addComment(l)}var f=share.showConformDialog(c.join(""),{title:"分享",width:485,needCen:d,marginLeft:d?"":"78px",funcOk:function(){var k=baidu.trim(baidu.G("share_share_comment_content").value);if(k!=""){b()}else{share.postShare.post()}}});baidu.G("shareCreateSelect").style.visibility="visible"};baidu.dom.ready(function(){share.comment={total_page:0,cmtNumPerPage:50,nowPage:0,dialog:0,deleteEle:0,commentIds:[],comment:new Space.Pubs.Comment(),reload:function(){share.comment.view(share.comment.total_page);var comment_num=parseInt(baidu.G("appShareCommentNum").innerHTML);baidu.G("appShareCommentNum").innerHTML=comment_num+1;baidu.G("appShareCommentNumRight").innerHTML=comment_num+1},view:function(page){share.comment.nowPage=page;var link_shid=detail_share_info.shid;var obj={thread_id:parseInt(link_shid),start:page*this.cmtNumPerPage,count:this.cmtNumPerPage,orderby_type:0,callback:"share.comment.viewCallBack"};this.comment.view(obj)},viewCallBack:function(data){var response=data;if(response.err_no==0){var output=[];if(response.body.data&&response.body.total_count){baidu.each(response.body.data,function(list){output.push(share.comment.generate_comment_html(list))});baidu.G("appShareCommentNum").innerHTML=response.body.total_count;baidu.G("appShareCommentNumRight").innerHTML=response.body.total_count;baidu.G("appShareCommentList").innerHTML=output.join("");var all_page=Math.ceil(response.body.total_count/share.comment.cmtNumPerPage);share.comment.total_page=all_page-1;baidu.G("appShareCommentListPager").innerHTML=baidu.space.pager.render(all_page,share.comment.nowPage,' href="#"  onclick="share.comment.view(#p#); return false;"')}}},generate_comment_html:function(list){list.display_name=list.un;list.delete_operate="";if(Space.msgConfig&&Space.msgConfig.userPortrait){list.display_name=Space.msgConfig.userPortrait==list.portrait?"我":list.un;if(Space.msgConfig.userPortrait==detail_share_info.first_portrait){list.delete_operate='&nbsp; &nbsp;|&nbsp; &nbsp;<a href="#" onclick="share.comment.delete_comment(\''+list.reply_id+"', this); return false;\" >删除</a>"}}var date_time=new Date();date_time.setTime(parseInt(list.cdatetime)*1000);list.cdatetime=baidu.date.format(date_time,"yyyy年MM月dd日 HH:mm");if(list.content.length>500){list.content=list.content.substring(0,501)}for(var i=0,icons=share.edit.icons,len=icons.length,reg;i<len;i++){reg=new RegExp("\\["+icons[i].name+"\\]","g");list.content=list.content.replace(reg,'<img title="['+icons[i].name+']" style="vertical-align:top;*vertical-align:middle;border:0;" src="'+icons[i].src+'" />')}var output=['<div class="comment_list clearfix">','<table class="avatar-cnt" cellspacing="0">',"<tr>",'<td><a href="http://hi.baidu.com/sys/checkuser/#{un}/3" target="_blank"><img src="http://tx.bdimg.com/sys/portraitn/item/#{portrait}.jpg"  /></a></td>',"</tr>","</table>",'<div class="comment_list_content">','<span class="comment_list_operate">#{cdatetime} #{delete_operate}</span>','<a href="http://hi.baidu.com/sys/checkuser/#{un}/3" target="_blank">#{display_name}</a>',"<p>#{content}</p>","</div>","</div>"];return baidu.format(output.join(""),list)},delete_comment:function(reply_id,elm){this.deleteEle=elm;var that=this;share.comment.dialog=share.showConformDialog(share.msg.comment_delete_confirm,{title:"提示",width:350,height:120,needCen:true,funcOk:function(){var shid=detail_share_info.shid,token=detail_share_info.token,obj={thread_id:parseInt(shid),reply_id:parseInt(reply_id),callback:"share.comment.deleteCallBack",u:App.Domain.apps+"/static/html/proxy.html",bdstoken:token};that.comment.delComment(obj)}})},deleteCallBack:function(){if(share.comment.dialog){share.comment.dialog.close()}setTimeout(function(){baidu.dom.remove(share.comment.deleteEle.parentNode.parentNode.parentNode);var comment_num=parseInt(baidu.G("appShareCommentNum").innerHTML);baidu.G("appShareCommentNum").innerHTML=comment_num-1;baidu.G("appShareCommentNumRight").innerHTML=comment_num-1},100)},create:function(portrait){var shid=detail_share_info.shid,token=detail_share_info.token,content=document.addcmt.content.value;if(baidu.string.getByteLength(content)>500){baidu.g("appShareCommentCreateError").innerHTML=share.msg.comment_too_long;return false}obj={thread_id:parseInt(shid),callback:"share.comment.createCallBack",content:baidu.string.encodeHTML(content),u:App.Domain.apps+"/static/html/proxy.html",bdstoken:token};if(portrait){obj.host_portrait=portrait}this.comment.addComment(obj);return false},createCallBack:function(arg){var link_shid=detail_share_info.shid;var args=arg.split("|"),data={};for(var i=0,len=args.length;i<len;i++){var frags=args[i].split("_");data[frags[0]]=frags[1]}if(data.errno==0){var needShare=baidu.G("shareToFrdCheck");if(needShare&&needShare.checked){share.post("/share/cm",{_method:"create_share",shid:link_shid,bdstoken:baidu.g("bdstoken").value,shareFrom:1},function(xhr){var response=eval("("+xhr.responseText+")");if(response.error.errno==0){setTimeout(function(){share.successMsg(share.msg.comment_create_share_success,"javascript:share.comment.reload()")},1000);baidu.G("share_comment_content").value="";baidu.G("appShareCommentCreateError").innerHTML="";baidu.G("appShareCommentCreateError").style.display="none";var shareToFrdCheckDiv=baidu.G("shareToFrdCheckDiv");shareToFrdCheckDiv.parentNode.removeChild(shareToFrdCheckDiv)}else{baidu.G("appShareCommentCreateError").innerHTML=response.error.errmsg;baidu.G("appShareCommentCreateError").style.display="block"}})}else{share.successMsg(share.msg.comment_create_success,"javascript:share.comment.reload()");baidu.G("share_comment_content").value="";baidu.G("appShareCommentCreateError").innerHTML="";baidu.G("appShareCommentCreateError").style.display="none"}}else{baidu.G("appShareCommentCreateError").innerHTML="发表评论失败！";baidu.G("appShareCommentCreateError").style.display="block"}},getComments:function(list){var that=this;baidu.array.each(list,function(item,i){that.commentIds.push(parseInt(item.getAttribute("par")))});var obj={thread_ids:this.commentIds.join(","),callback:"share.comment.getCommentCallBack"};this.comment.getListCont(obj)},getCommentCallBack:function(data){if(data.err_no==0){var json=data.body.total_counts;for(var o in json){if(json.hasOwnProperty(o)){var comments=baidu.q("comment_"+parseInt(o),appShareList),value=json[o];baidu.array.each(comments,function(item,i){item.innerHTML=value})}}}}};var dialog;var appShareList=baidu.G("appShareList"),appShareCommentList=baidu.g("appShareCommentList");if(appShareList){share.comment.getComments(baidu.q("commentList",appShareList))}if(appShareCommentList){share.comment.view(0);var content=document.addcmt.content;baidu.on(content,"keydown",function(e){var e=e||window.event,keyCode=e.keyCode,appShareCommentCreateError=baidu.g("appShareCommentCreateError");if(baidu.string.getByteLength(content.value)>=500){if(64<keyCode<91||47<keyCode<58||95<keyCode<112||185<keyCode<193||keyCode==32||keyCode==9||keyCode==13||218<keyCode<223){appShareCommentCreateError.innerHTML=share.msg.comment_too_long}}else{appShareCommentCreateError.innerHTML=""}})}});share.vote={add:function(c){var a=["<form onsubmit=\"return share.vote.createFunc('"+c+'\')" id="appShareCreateVoteForm">','<div id="appShareCreateVote">','<p id="appShareCreateVoteError" class="error"></p>',"<p>新增的投票选项: <p>",'<p><input type="text" id="vote_opt_first" /></p>',"</div>","</form>"];var b=share.showConformDialog(a.join(""),{title:"发起投票",width:400,height:100,funcOk:function(){share.vote.createFunc(c)}});baidu.G("vote_opt_first").focus()},create:function(c){var a=["<form onsubmit=\"return share.vote.createFunc('"+c+'\')" id="appShareCreateVoteForm">','<div id="appShareCreateVote">','<p id="appShareCreateVoteError" class="error"></p>','<p>观点1: <input type="text" name="vote_opt" id="vote_opt_first" /></p>','<p>观点2: <input type="text" name="vote_opt" /></p>','<p>观点3: <input type="text" name="vote_opt" /></p>','<p>观点4: <input type="text" name="vote_opt" /></p>','<p>观点5: <input type="text" name="vote_opt" /></p>',"</div>","</form>"];var b=share.showConformDialog(a.join(""),{title:"发起投票",width:400,height:300,funcOk:function(){share.vote.createFunc(c)}});share.setDefaultVote("vote_opt","defaultContent")},createFunc:function(shid){var form_data={_method:"create_vote_item",shid:shid};var inputs=baidu.G("appShareCreateVote").getElementsByTagName("input");var curr_index=0;var vote_options={};baidu.each(inputs,function(input){var input_value=baidu.trim(input.value);if(input_value!=""){vote_options[input_value]=true}});baidu.each(vote_options,function(option,option_key){form_data["vote_item_"+curr_index]=option_key;curr_index=curr_index+1});share.post("/share/cm/",form_data,function(xhr){var response=eval("("+xhr.responseText+")");if(response&&("error" in response)&&response.error.errno==403){return Space.Libs.loginDialog()}if(response.error.errno==0){share.successMsg(share.msg.vote_create_success,window.location.href)}else{baidu.G("appShareCreateVoteError").innerHTML=response.error.errmsg}});return false},vote:function(portrait,shid,index){var form_data={_method:"join_vote",shid:shid,orderid:index};share.post("/share/cm/",form_data,function(xhr){var response=eval("("+xhr.responseText+")");if(response&&("error" in response)&&response.error.errno==403){return Space.Libs.loginDialog()}if(response.error.errno==0){if(share_info&&share_info.allow_share>0){share.share(portrait,shid,'<p style="text-align:center">投票成功, 是否分享给好友?</p>',"",true,true)}else{share.successMsg(share.msg.vote_success,window.location.href)}}else{share.showTextDialog('<p style="text-align:center;font-size:14px;">'+response.error.errmsg+"</p>","系统提示",350,120)}})},displayVote:function(h,c,j,b,f,e){if(b.length==0){baidu.G("appShareVote").style.display="none";return}var d=['<div class="vote-head">共有'+f+"人参与投票"];if(c!=false){d.push(' (您的观点是"'+b[c].item_name+'")</div>')}else{d.push("</div>")}var a=["#5dbc5b","#6c81b6","#9eb5f0","#a5cbd6","#aee7f8","#c2f263","#d843b3","#d8e929","#e58652","#e7ab6d","#ee335f","#fbe096","#ffc535"];function i(){var l=Math.floor(Math.random()*a.length);var k=a[l];a.splice(l,1);return k}d.push("<ul>");baidu.each(b,function(k,m){var l=i();k.color=l;if(f==0){k.percent="0%"}else{k.percent=((k.num/f)*100).toFixed(1)+"%"}if(m===c){k.my_vote_iconv='<img src="/static/apps/appvote/green_ok.gif" title="您的选择"/>'}else{k.my_vote_iconv=""}if(c===false){k.vote_radio='<input type="radio" name="share_vote" />'}else{k.vote_radio=""}var n=["<li>","<h4>#{item_name}:</h4>",'<div class="vote_item_bar"><div class="vote_item_bar_inner" style="width: #{percent}; background:#{color}; border-left: 1px solid #{color}"></div></div>','<div class="vote_item_num">#{num} (#{percent})</div>','<div class="vote_item_radio">#{my_vote_iconv} #{vote_radio}</div>',"</li>"].join("");d.push(baidu.format(n,k))});d.push("</ul>");if(e.length>0){d.push('<p style="margin-top:10px">好友的投票:</p><div>')}baidu.each(e,function(l){var k=['<div class="friend_vote">','<table class="avatar-cnt" cellspacing="0">',"<tr>",'<td><a href="http://hi.baidu.com/sys/checkuser/#{friend_name}/3" target="_blank"><img src="http://tx.bdimg.com/sys/portraitn/item/#{friend_portrait}.jpg"  /></a></td>',"</tr>","</table>",'<p class="friend_vote_item"><a href="http://hi.baidu.com/sys/checkuser/#{friend_name}/3" target="_blank">#{friend_name}</a>的观点是: <br/>#{item_name}</p>',"</div>"].join("");d.push(baidu.format(k,l))});d.push("</div>");baidu.G("appShareVote").innerHTML=d.join("");var g=baidu.G("appShareVote").getElementsByTagName("li");if(c===false){baidu.each(g,function(l,k){l.onclick=function(){share.vote.vote(h,j,k)};l.onmouseover=function(){l.className="on"};l.onmouseout=function(){l.className="off"}})}}};share.deleteShare=function(b){var a=share.showConformDialog('<div style="font-weight:bold;font-size:12px;margin-bottom:20px">您确定要删除此分享吗</div>',{title:"提示",width:350,height:120,needCen:true,funcOk:function(){var c={shid:b,_method:"delete_share"};share.post("/share/cm/",c,function(d){a.close();share.successMsg(share.msg.share_delete_success,"/share/mine")})}})};(function(){var a="http://img.baidu.com/hi/face/i_f",b=[{name:"微笑",src:a+"01.gif"},{name:"大笑",src:a+"02.gif"},{name:"哭",src:a+"09.gif"},{name:"惊讶",src:a+"36.gif"},{name:"生气",src:a+"06.gif"},{name:"可爱",src:a+"28.gif"},{name:"亲",src:a+"20.gif"},{name:"一滴汗",src:a+"08.gif"},{name:"害怕",src:a+"34.gif"},{name:"色",src:a+"29.gif"},{name:"酷",src:a+"05.gif"},{name:"紧张",src:a+"04.gif"},{name:"憧憬",src:a+"32.gif"},{name:"吐",src:a+"17.gif"},{name:"害羞",src:a+"18.gif"},{name:"委屈",src:a+"19.gif"},{name:"谄笑",src:a+"21.gif"},{name:"鄙视",src:a+"11.gif"},{name:"困",src:a+"33.gif"},{name:"喷",src:a+"37.gif"},{name:"爱情",src:a+"22.gif"},{name:"心碎",src:a+"23.gif"},{name:"玫瑰",src:a+"24.gif"},{name:"礼物",src:a+"25.gif"},{name:"顶",src:a+"48.gif"},{name:"踩",src:a+"49.gif"}];share.edit=share.edit||{};share.edit.icons=b;share.showFacePanel=function(d,g,j,h){if(baidu.g("shareFacePanel")&&baidu.g("shareFacePanel").style.display!="none"){baidu.g("shareFacePanel").style.display="none";return}if(baidu.g("shareFacePanel")){baidu.g("shareFacePanel").style.display="block";return}var f=['<div class="cf clearfix" style="width:293px;padding-bottom:2px; background-color:#FFF; border:1px solid #DDDDDD;">'];for(var e=0,c=b.length;e<c;e++){f[f.length]=baidu.string.format('<span style="cursor:pointer;display:block;float:left;height:25px;width:25px;margin-top:2px;margin-left:2px;border:1px dashed #ddd;" onclick="share.insertFace(\''+g+'\',\'[#{name}]\')" onmouseover="this.style.border=\'dashed 1px #aaa\'" onmouseout="this.style.border=\'dashed 1px #ddd\'"><img title="[#{name}]" src="#{src}" height="25" width="25" alt="#{name}" /></span>',b[e])}f[f.length]="</div>";var k=baidu.dom.getPosition(d);if(!baidu.g("shareFacePanel")){var l=document.createElement("div");l.id="shareFacePanel";l.style.cssText="position:absolute;left:"+k.left+"px;top:"+(k.top+20)+"px";l.innerHTML=f.join("");document.body.appendChild(l);baidu.on(document,"mousedown",function(m){var i=m.target||m.srcElement;if(baidu.G("shareFacePanel")&&i!=baidu.G("shareFacePanel")&&!baidu.dom.contains(baidu.G("shareFacePanel"),i)&&i!=baidu.G(g)){l.style.display="none"}})}else{var l=baidu.g("shareFacePanel").shareFacePanel.style.top=k.top+20+"px";l.style.left=k.left+"px"}};share.insertFace=function(f,h){var e=baidu.G(f),d=(e.getAttribute("selection")||"|").split("|"),g=e.value;d[0]=d[0]|0;d[1]=d[1]|0;g=g.substring(0,d[0])+h+g.substring(d[1],g.length);e.value=g;if(typeof(e.selectionStart)!="undefined"){e.selectionStart=e.selectionEnd=d[0]+h.length}else{var c=e.createTextRange();c.move("character",d[0]+h.length);c.select()}e.focus();baidu.g("shareFacePanel").style.display="none"};share.listenerSelection=function(g,f){var i=f.value||"",j=f.selectionStart,c=f.selectionEnd;if(typeof(f.selectionStart)=="undefined"){var d=document.selection;if(f.tagName.toLowerCase()!="textarea"){var h=f.value;range=d.createRange().duplicate();range.moveEnd("character",h.length);s=(range.text==""?h.length:h.lastIndexOf(range.text));range=d.createRange().duplicate();range.moveStart("character",-h.length);g=range.text.length}else{range=d.createRange();stored_range=range.duplicate();stored_range.moveToElementText(f);stored_range.setEndPoint("EndToEnd",range);s=stored_range.text.length-range.text.length;g=s+range.text.length}j=s;c=g}f.setAttribute("selection",j+"|"+c)}})();share.showBlogVote=function(){var c=document.getElementsByName("FCK_VOTE");for(var d=0,b=c.length,e,a=0,f;d<b;d++){e=c[0];a=e.getAttribute("rel")|0;if(a){f=document.createElement("span");e.parentNode.replaceChild(f,e);baidu.swf.create({id:"VOTE_FLASH_"+d,width:"585",height:"100",ver:"9.0.0",wmode:document.all?"opaque":"window",allowscriptaccess:"always",url:"http://hi.bdimg.com/apps/appvote/spaceVote.swf?vote_id="+a},f)}}};share.showBlogMusic=function(){function d(q){var u={},r=q.split("&");for(var o=0,v=r.length;o<v;o++){var m=r[o].split("=");u[m[0]]=m[1]}return u}function b(o){var m="";for(var n in o){m+="&"+n+"="+encodeURIComponent(o[n])}return m}if(window.Node){Node.prototype.replaceNode=function(i){this.parentNode.replaceChild(i,this)}}var k=true,f=document.getElementsByName("FCK_MP3_MUSIC");var a="http://box.baidu.com/widget/flash/bdspacesong.swf";for(var h=0,c=f.length;h<c;h++){var j=f[h];if(j.getAttribute("rel")){var e=document.createElement("SPAN");var g=d(decodeURIComponent(j.getAttribute("rel")));j.replaceNode(e);if(g.autoPlay=="true"&&k){k=false;g.autoPlay=true}else{g.autoPlay=false}var l=location.href;if((l.lastIndexOf("/blog")+5)==l.length||(l.lastIndexOf("/blog/")+6)==l.length){g.autoPlay=false}baidu.swf.create({id:"mp3player"+Math.random(),width:"400",height:"95",ver:"9.0.0.0",url:a+"?"+b(g),wmode:"opaque",allowScriptAccess:"always","allowNetworking ":"all"},e);h--;c--}}};share.nsTrack=function(a,d,g){var b=109,e=2010,i="nslog__"+(new Date).getTime(),h=window[i]=new Image;g=g||{};var f=[];for(var i in g){f[f.length]=encodeURIComponent(i)+"="+encodeURIComponent(g[i])}f=f.join("&");if(f){f="&"+f}h.onload=h.onerror=function(){window[i]=null};h.src="http://nsclick.baidu.com/v.gif?pid="+b+"&url="+encodeURIComponent(d)+"&type="+e+"&m="+a+"&_t="+Math.random()+f;h=null};share.removeUnsafeLink=function(){var d=baidu.g("app-share-content"),b=d.getElementsByTagName("a"),e=/^http:\/\/[\w\.]+\.baidu\.com\//;for(var c=0,a=b.length;c<a;c++){if(!e.test(b[c].getAttribute("href",2))){b[c].removeAttribute("href")}}};share.modifyPrivilege=function(privilege,shid){privilege=privilege|0;var txt=['<div style="margin-bottom:20px;font-size:12px">',"<strong>浏览权限：</strong>",'<input type="radio" name="privilege" value="0" '+(privilege==0?"checked":"")+' id="privilege_0"><label for="privilege_0">所有人</label>','<input type="radio" name="privilege" value="1" '+(privilege==1?"checked":"")+' id="privilege_1"><label for="privilege_1">好友</label>','<input type="radio" name="privilege" value="2" '+(privilege==2?"checked":"")+' id="privilege_2"><label for="privilege_2">私藏给自己</label>','<p id="share_share_comment_error" class="error"></p>',"</div>"].join("");var dialog=share.showConformDialog(txt,{title:"修改浏览权限",needCen:true,width:350,height:120,funcOk:function(){var value=0;baidu.each(document.getElementsByName("privilege"),function(){if(this.checked){value=this.getAttribute("value")|0}});share.post("/share/cm",{_method:"save_privilege",shid:shid,auth:value,async:false},function(xhr){var response=eval("("+xhr.responseText+")");if(response.error.errno==0){var pop=share.showTextDialog('<div style="text-align:center;font-size:14px;">修改浏览权限成功</div>');setTimeout(function(){location.reload()},600)}else{baidu.G("share_share_comment_error").innerHTML=response.error.errmsg}})}})};var g_index_act={};baidu.dom.ready(function(){var c=baidu.g("shareHomeSideLC"),a="http://act.hi.baidu.com/activity/data/user/";if(c){var b=a+"lotterynum?act_id=9&callback=g_index_act.viewCallBack&t="+new Date().getTime();baidu.sio.callByBrowser(b);g_index_act.viewCallBack=function(g){var h=30,f=baidu.q("progress-bar-cover",c)[0],d=baidu.g("lotteryInfo"),i=d.getElementsByTagName("span"),e=baidu.q("view-lottery-code",c);if(parseInt(g)==0){f.parentNode.removeChild(f);e[1].parentNode.removeChild(e[1])}else{e[1].style.display="";f.style.display="";f.parentNode.style.backgroundPosition="0px -20px";d.innerHTML="<br>&nbsp;&nbsp;&nbsp;你已经获得了<span>"+g+"个</span>抽奖码，今天你还可以获得<span>"+(h-g)+"个</span>抽奖码！加油哦！";f.style.width=(parseInt(g)/h)*100+"%";baidu.q("progress-bar-cont",c)[0].innerHTML=g+"/"+h;e[0].parentNode.removeChild(e[0])}}}});